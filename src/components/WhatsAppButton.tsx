
import { useState, useEffect } from 'react';

const WhatsAppButton = () => {
  const [isVisible, setIsVisible] = useState(false);

  useEffect(() => {
    const handleScroll = () => {
      if (window.scrollY > 300) {
        setIsVisible(true);
      } else {
        setIsVisible(false);
      }
    };

    window.addEventListener('scroll', handleScroll);
    
    return () => {
      window.removeEventListener('scroll', handleScroll);
    };
  }, []);

  return (
    <a
      href="https://wa.me/34676435634"
      target="_blank"
      rel="noopener noreferrer"
      className={`fixed bottom-6 right-6 z-50 flex items-center justify-center w-16 h-16 bg-[#25D366] rounded-full shadow-medium transition-all duration-300 ease-smooth ${
        isVisible ? 'opacity-100 scale-100' : 'opacity-0 scale-90 pointer-events-none'
      }`}
      aria-label="Contactar por WhatsApp"
    >
      <div className="absolute w-full h-full rounded-full animate-pulse-soft bg-[#25D366] opacity-30"></div>
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white" className="w-8 h-8">
        <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347z" />
        <path d="M12 0C5.373 0 0 5.373 0 12c0 6.628 5.373 12 12 12 6.628 0 12-5.373 12-12 0-6.628-5.373-12-12-12zm.03 5.142c1.783-.114 3.528.439 4.965 1.576 1.372 1.082 2.383 2.599 2.841 4.301.462 1.723.285 3.544-.501 5.167-.788 1.627-2.112 2.952-3.72 3.724-1.615.77-3.44.92-5.162.423-1.685-.487-3.152-1.551-4.12-2.996-.99-1.487-1.401-3.274-1.153-5.02.25-1.753 1.172-3.395 2.55-4.557 1.412-1.195 3.216-1.835 5.055-1.794.083-.002.166-.003.248-.002l-.003-.002zM8.579 18.396c1.736.855 3.753.883 5.513.078 1.738-.797 3.04-2.286 3.66-4.085.626-1.813.505-3.805-.336-5.534-.863-1.77-2.464-3.103-4.374-3.65-1.898-.548-3.918-.218-5.532.897a6.843 6.843 0 0 0-2.584 3.651c-.5 1.709-.373 3.527.357 5.134a7.14 7.14 0 0 0 3.296 3.509zm6.444-7.244c-.359-.591-.754-.69-1.043-.702-.272-.01-.584-.008-.892-.008-.308 0-.809.115-.1.232.57.587-.87 1.872-.87 1.872s-.868 1.663-.868 2.057c0 .395.564 2.308 2.625 3.357 1.037.527 1.763.683 2.387.599 1.003-.135 1.755-.714 1.755-.714l.439-.439c.11-.199-.072-.617-.28-.992-.19-.36-.312-.505-.446-.633-.257-.245-.531-.205-.762-.127-.301.101-.7.338-.833.412-.248.138-.422.173-.642.059-.403-.21-1.357-.65-2.151-1.673-.52-.67-.867-1.393-.967-1.626-.1-.233-.009-.362.075-.477.077-.106.173-.204.259-.308.086-.103.143-.181.215-.307.073-.126.088-.215.048-.33-.04-.15-.327-.867-.462-1.177-.135-.331-.329-.399-.483-.407z" />
      </svg>
      <span className="absolute top-0 right-0 flex items-center justify-center w-5 h-5 bg-osteo-dark-blue text-white text-xs font-bold rounded-full transform translate-x-1 -translate-y-1">1</span>
    </a>
  );
};

export default WhatsAppButton;
